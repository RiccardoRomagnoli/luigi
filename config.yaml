codex:
  # Recommended: use the Codex-tuned GPT-5.2 model with maximum reasoning effort.
  model: "gpt-5.2-codex"
  reasoning_effort: "xhigh"
  sandbox: "read-only"
  approval_policy: "never"

claude_code:
  model: "opus"
  allowed_tools:
    - "Bash"
    - "Read"
    - "Edit"
    - "Write"
    - "Glob"
    - "Grep"
  # Turn limit for Claude Code CLI. Use null/0 to omit the flag (unlimited).
  max_turns: null

agents:
  reviewers:
    - id: "reviewer-1"
      kind: "codex"
  executors:
    - id: "executor-1"
      kind: "claude"
  assignment:
    mode: "round_robin"
    executors_per_plan: 1

telegram:
  enabled: false
  bot_token: ""
  chat_id: ""
  allowed_user_ids: []
  poll_interval_sec: 2.0

orchestrator:
  # Iteration limit. Use null/0 for unlimited.
  max_iterations: null
  # If an executor requests reviewer input (status NEEDS_REVIEWER), how many ask/answer
  # rounds to allow per iteration. Use null/0 for unlimited.
  max_claude_question_rounds: null
  # Default locations when running as a global CLI:
  working_dir: "~/.luigi/workspaces"
  logs_dir: "~/.luigi/logs"
  # Workspace isolation:
  # - in_place: run directly in the target directory (fastest; recommended default)
  # - auto: git worktree when possible, else a safe copy+apply strategy
  # - worktree: always use git worktrees (requires git repo with commits)
  # - copy: always use an isolated copy (applied back on approval)
  workspace_strategy: "in_place"
  use_git_worktree: true
  # Cleanup policy:
  # - always: always delete the workspace directory/worktree
  # - on_success: delete only when approved + persisted (recommended)
  # - never: keep everything
  cleanup: "on_success"
  # Persistence policy:
  apply_changes_on_success: true
  carry_forward_workspace_between_iterations: true
  commit_on_approval: true
  commit_message: "Task complete: {task} (run {run_id})"
  # Do not auto-merge; keep a short feature branch for admin to merge to main/dev.
  auto_merge_on_approval: false
  merge_target_branch: "main"
  merge_style: "merge_commit"
  dirty_main_policy: "commit"
  dirty_main_commit_message: "Auto-commit local changes before Luigi merge (run {run_id})"
  merge_commit_message: "Merge {branch} into {target} (run {run_id})"
  delete_branch_on_merge: true
  delete_worktree_on_merge: true
  # Feature branch naming for worktrees (short + readable)
  branch_prefix: "luigi"
  branch_name_length: 8
  branch_suffix_length: 6
  session_mode: true
  ui:
    enabled: true
    host: "127.0.0.1"
    base_port: 8501
    port_range: 500
    open_browser: false
    keep_alive_after_run: false
    poll_interval_sec: 0.5
    user_input_timeout_sec: null

testing:
  # If Codex plan does not provide `test_commands`, fall back to these.
  timeout_sec: 1800
  install_if_missing: false
  unit_command: ["npm", "test"]
  e2e_command: ["npx", "playwright", "test"]
